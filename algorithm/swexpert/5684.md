### 5684_운동

> N개의 건물과 M개의 도로로 구성되어 있는 마을이 있다.
>
> 도로는 건물과 건물 사이에 놓여 있으며, 일방 통행 도로이다.
>
> 건물의 번호는 1번부터 N번까지 각각 주어져있다.
>
> 
> 원철이는 마을의 도로를 따라 운동을 하기 위한 경로를 찾으려고 한다.
>
> 운동을 한 후에는 다시 시작점으로 돌아오는 것이 편하기 때문에, 원철이는 사이클을 찾기를 원한다.
>
> 단, 운동을 하는 도중 무슨 일이 생길지 모르므로, 사이클을 이루는 도로의 길이의 합이 최소가 되도록 찾으려고 한다.
>
> 
> 도로의 정보가 주어졌을 때, 도로의 길이의 합이 가장 작은 사이클을 찾는 프로그램을 작성하시오.
>
> 두 마을을 왕복하는 경우도 사이클에 포함됨에 주의하시오.
>
> **[입력]**
> 첫 줄에 테스트케이스의 개수 T가 주어진다. (1 ≤ T ≤ 20)
>
> 각 테스트 케이스의 첫 번째 줄에 건물의 수 N과 도로의 수 M이 주어진다. (2 ≤ N ≤ 400, 2 ≤ M ≤ N*(N-1))
>
> 각 테스트 케이스의 두 번째 줄부터 M개의 줄에 걸쳐 도로의 정보 s, e, c가 주어진다.
>
> 이는 s번 건물으로부터 e번 건물으로 이동하는 길이 c의 일방 통행 도로가 있다는 의미이다.
>
> 거리는 10,000 이하의 자연수이고, 같은 시작점과 도착점을 가진 간선은 최대 한 개 등장한다.
>
> **[출력]**
> 각 테스트케이스마다 한 줄에 걸쳐, 테스트케이스 수 “#(TC) “를 출력하고, 도로의 길이의 합이 가장 작은 사이클의 길이를 출력한다. 만약, 그러한 사이클을 찾을 수 없다면 -1을 출력한다.





- 문제는 배운 걸로 풀고싶어서 dfs로 풀려고 애썼으나 결국 시간초과의 벽을 넘지 못하고 검색하다 floyd-warshall 알고리즘을 써야한다는 걸 알았다. 나름 학습했는데 아직 긴가민가하다. 그리고 플로이드 워셜이 문제가 아니라 dfs도 계속 실패했다.
  1. 최단 경로 구하면서 재귀문이 끝나는 조건 제일 위에 지정해줘야하는데 안하고
  2. 재귀 끝난 후에 지금 다녀온 경로 길이 빼고 visited 되돌려야 중간까지 온 경로의 다음 지점을 향할 때 앞서 구해뒀던 갚을 사용할 수 있는데 그걸 안해서 고생했다. ex) a ~ e를 갈 때 b-c를 거치거나 b-d를 거쳐야하는데 b-c를 거쳐 간 후에 b-c를 갈 때 사용했던 길이를 변수에서 뺀 다음 b-d길이를 더해야 하는데 그걸 생각 못해서 계속 이상한 짓만 했다. 가지치기 또한 위치를 잘못 지정했다... 저번에도 실수했던 건데 언제쯤 실수 안할지?
- 그리고 플로이드 워셜 알고리즘처럼 굉장히 큰 값을 초기값으로 지정해야 하는 경우 문제랑 상관없이 무작정 큰 값을 위해 1e9를 쓰지말고 문제에서 언급한 최대값을 활용해야한다. 숫자랑 상관없는지 알았는데 너무 큰 값을 써서 트렸다.

```python
T = int(input())

for tc in range(1, T+1):
    # 건물의 수, 도로의 수
    N, M = map(int, input().split())
    road = [[1e9] * (N+1) for _ in range(N+1)]
    # s번 건물로부터 e번 건물로 이동하는 길이 c의 일방통행 도로
    for i in range(M):
        s, e, c = map(int, input().split())
        road[s][e] = c

    result = 1e9
    for i in range(1, N+1):
        for j in range(1, N+1):
            for k in range(1, N+1):
                road[j][k] = min(road[j][k], road[j][i] + road[i][k])

    for i in range(1, N+1):
        if road[i][i] < result:
            result = road[i][i]

    if result == 1e9:
        result = -1
    
    print("#{} {}".format(tc, result))
```

